<main class="container">
    <a routerLink="/lobby" class="btn btn-default">Back to lobby</a>
    <button *ngIf='inSync==false' class="btn btn-default">Sync</button>
    <div class="row">
        <div class="col-sm-12 col-md-8">
            <div id="play-area" class="blank" style="">
                <video id="video-player" controls="">
                    <source *ngIf="stream | async" >
                </video>
            </div>
            <form (ngSubmit)="streamUrl()" *ngIf="isHost | async">
                <div class="input-group">
                    <label class="input-group-addon" for="url">url:</label>
                    <input [(ngModel)]="url" name="url" class="form-control">
                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-default">Load</button>
                    </span>
                </div>
            </form>
            <div *ngIf="tab == 'queue'">
                <ul class="nav nav-tabs">
                    <li class="active"><a (click)="switchTab('queue')">Queue</a></li>
                    <li><a (click)="switchTab('history')">History</a></li>
                    <li><a (click)="switchTab('users')">Users</a></li>
                </ul>
            </div>
            <div *ngIf="tab == 'history'">
                <ul class="nav nav-tabs">
                    <li><a (click)="switchTab('queue')">Queue</a></li>
                    <li class="active"><a (click)="switchTab('history')">History</a></li>
                    <li><a (click)="switchTab('users')">Users</a></li>
                </ul>
            </div>
            <div *ngIf="tab == 'users'">
                <ul class="nav nav-tabs">
                    <li><a (click)="switchTab('queue')">Queue</a></li>
                    <li><a (click)="switchTab('history')">History</a></li>
                    <li class="active"><a (click)="switchTab('users')">Users</a></li>
                </ul>
                <div class="users">
                    <div *ngFor="let username of users | async">{{username}}</div>
                </div>
            </div>
        </div>
        <div class="col-sm-0 col-md-4">
            <form (ngSubmit)='sendChatMessage()'>
                <div class="form-group">
                    <div class="input-group">
                        <input [(ngModel)]="chatText" name="text" type="text" class="form-control">
                        <span class="input-group-btn">
                            <button class="btn btn-default">Send</button>
                        </span>
                    </div>
                </div>
            </form>
            <div class="chat">
                <div *ngFor="let entry of chat | async">
                    <div><b *ngIf="entry.user != null">{{entry.user}}:</b> {{entry.message}}</div>
                    <div></div>
                </div>
            </div>
        </div>
    </div>
</main>